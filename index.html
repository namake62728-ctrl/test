<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>サークル費 簡易管理</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header class="app-header">
      <h1>サークル費 簡易管理</h1>
      <div class="header-actions">
        <button id="btn-export" class="secondary">エクスポート</button>
        <label class="file-import">
          <input id="file-import" type="file" accept="application/json" hidden />
          <span class="secondary">インポート</span>
        </label>
      </div>
    </header>

    <nav class="tabs">
      <button data-tab="members" class="active">メンバー</button>
      <button data-tab="periods">集金期間</button>
      <button data-tab="payments">清算状況</button>
      <button data-tab="expenses">支出</button>
      <button data-tab="summary">サマリー</button>
    </nav>

    <main>
      <!-- Members Tab -->
      <section id="tab-members" class="tab-panel active">
        <h2>メンバー管理</h2>
        <form id="form-member" class="grid-form">
          <input type="hidden" id="member-id" />
          <label>
            名前
            <input id="member-name" type="text" placeholder="例: 山田 太郎" required />
          </label>
          <label>
            連絡先（任意）
            <input id="member-contact" type="text" placeholder="メール/LINEなど" />
          </label>
          <div class="row actions">
            <button type="submit">保存</button>
            <button type="reset" id="member-cancel" class="secondary">リセット</button>
          </div>
        </form>

        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>#</th>
                <th>名前</th>
                <th>連絡先</th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody id="members-tbody"></tbody>
          </table>
        </div>
      </section>

      <!-- Periods Tab -->
      <section id="tab-periods" class="tab-panel">
        <h2>集金期間</h2>
        <form id="form-period" class="grid-form">
          <input type="hidden" id="period-id" />
          <label>
            期間名
            <input id="period-name" type="text" placeholder="例: 2025年4月分" required />
          </label>
          <label>
            会費(円)
            <input id="period-fee" type="number" inputmode="numeric" min="0" step="100" placeholder="例: 1000" required />
          </label>
          <div class="row actions">
            <button type="submit">保存</button>
            <button type="reset" id="period-cancel" class="secondary">リセット</button>
          </div>
        </form>

        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>#</th>
                <th>期間名</th>
                <th>会費(円)</th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody id="periods-tbody"></tbody>
          </table>
        </div>
      </section>

      <!-- Payments Tab -->
      <section id="tab-payments" class="tab-panel">
        <h2>清算状況</h2>
        <div class="row">
          <label>
            対象期間
            <select id="payments-period-select"></select>
          </label>
          <div class="row actions">
            <button id="btn-mark-all-paid" class="secondary" type="button">全員を支払い済みに</button>
            <button id="btn-mark-all-unpaid" class="secondary" type="button">全員を未払いに</button>
          </div>
        </div>

        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>#</th>
                <th>名前</th>
                <th>状態</th>
                <th>金額(円)</th>
                <th>日付</th>
                <th>メモ</th>
              </tr>
            </thead>
            <tbody id="payments-tbody"></tbody>
            <tfoot>
              <tr>
                <td colspan="6" id="payments-summary"></td>
              </tr>
            </tfoot>
          </table>
        </div>
      </section>

      <!-- Expenses Tab -->
      <section id="tab-expenses" class="tab-panel">
        <h2>支出</h2>
        <form id="form-expense" class="grid-form">
          <input type="hidden" id="expense-id" />
          <label>
            日付
            <input id="expense-date" type="date" required />
          </label>
          <label>
            金額(円)
            <input id="expense-amount" type="number" inputmode="numeric" min="0" step="100" placeholder="例: 2000" required />
          </label>
          <label>
            カテゴリ（任意）
            <input id="expense-category" type="text" placeholder="例: 備品" />
          </label>
          <label>
            メモ（任意）
            <input id="expense-note" type="text" placeholder="用途など" />
          </label>
          <label>
            立替者
            <select id="expense-payer"></select>
          </label>
          <div class="row actions">
            <button type="submit">保存</button>
            <button type="reset" id="expense-cancel" class="secondary">リセット</button>
          </div>
        </form>

        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>#</th>
                <th>日付</th>
                <th>金額(円)</th>
                <th>カテゴリ</th>
                <th>メモ</th>
                <th>立替者</th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody id="expenses-tbody"></tbody>
          </table>
        </div>
      </section>

      <!-- Summary Tab -->
      <section id="tab-summary" class="tab-panel">
        <h2>サマリー</h2>
        <div class="summary-cards" id="summary-totals"></div>
        <h3>期間別（設定した集金期間）</h3>
        <div class="summary-cards" id="summary-periods"></div>
        <h3>月間集計</h3>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>月</th>
                <th>収入</th>
                <th>支出</th>
                <th>収支</th>
              </tr>
            </thead>
            <tbody id="summary-monthly"></tbody>
          </table>
        </div>
        <h3>カテゴリー別（支出）</h3>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>カテゴリ</th>
                <th>件数</th>
                <th>合計(円)</th>
              </tr>
            </thead>
            <tbody id="summary-categories"></tbody>
          </table>
        </div>
        <h3>立替者別</h3>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>#</th>
                <th>名前</th>
                <th>立替合計(円)</th>
              </tr>
            </thead>
            <tbody id="summary-payers"></tbody>
          </table>
        </div>
        <h3>メンバー別</h3>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>#</th>
                <th>名前</th>
                <th>支払い済み/総数</th>
                <th>支払い総額(円)</th>
                <th>未払い総額(円)</th>
              </tr>
            </thead>
            <tbody id="summary-members"></tbody>
          </table>
        </div>
      </section>
    </main>

    <footer class="app-footer">
      <small>データはブラウザのローカルストレージに保存されます。必要に応じてJSONでエクスポート/インポートしてください。</small>
    </footer>

    <script src="script.js"></script>
  </body>
  </html>
